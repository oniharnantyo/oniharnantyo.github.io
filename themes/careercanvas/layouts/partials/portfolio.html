<section id="portfolio" class="py-12 bg-bg-secondary dark:bg-bg-secondary border-t border-border-primary" data-animate>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    {{ with .Site.GetPage "portfolio" }}
    <h2 class="text-3xl font-bold text-center mb-4 font-heading text-text-primary dark:text-text-primary">{{ .Title }}</h2>
    <p class="text-lg text-center mb-12 text-gray-700 dark:text-text-tertiary italic">{{ .Params.intro }}</p>

    <div class="flex flex-col">
      <!-- Portfolio Projects Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {{ $projectsToShow := .Site.Params.portfolio_projects_on_homepage | default 3 }}
        {{ range first $projectsToShow .Params.projects }}
        <div class="bg-bg dark:bg-bg rounded-lg shadow-lg border border-border-primary dark:border-border-primary p-6 card-hover transition-all duration-300 hover:shadow-xl">
        <div class="flex items-start justify-between mb-4">
          <h3 class="text-xl font-bold text-text-primary dark:text-text-primary">{{ .title }}</h3>
          {{ if .featured }}
          <span class="inline-flex items-center bg-gradient-primary text-white px-2 py-1 rounded-full text-xs font-medium">
            <i class="fas fa-star mr-1"></i>{{ i18n "featured" }}
          </span>
          {{ end }}
        </div>

        <div class="mb-4">
          <p class="text-gray-700 dark:text-text-secondary text-sm">{{ .description }}</p>
        </div>

        <!-- Period -->
        {{ if .period }}
        <div class="flex flex-wrap gap-2 mb-4 text-xs">
          <span class="inline-flex items-center bg-primary text-white px-2 py-1 rounded-full">
            <i class="fas fa-calendar mr-1"></i>{{ .period }}
          </span>
        </div>
        {{ end }}

        <!-- Technologies -->
        {{ if .technologies }}
        <div class="mb-4">
          <h4 class="text-sm font-semibold text-text-primary dark:text-text-primary mb-2">{{ i18n "technologiesUsed" }}</h4>
          <div class="flex flex-wrap gap-1">
            {{ range .technologies }}
            <span class="inline-block bg-gray-200 dark:bg-bg-tertiary text-text-tertiary dark:text-text-secondary px-2 py-1 rounded text-xs">
              {{ . }}
            </span>
            {{ end }}
          </div>
        </div>
        {{ end }}

        <!-- Links -->
        <div class="flex flex-wrap gap-2 mb-4">
          {{ if .github_url }}
          <a href="{{ .github_url }}" target="_blank" rel="noopener noreferrer" class="inline-flex items-center bg-gray-800 text-white px-3 py-1 rounded text-xs font-medium hover:bg-gray-700">
            <i class="fab fa-github mr-1"></i> GitHub
          </a>
          {{ end }}
          {{ if .website_url }}
          <a href="{{ .website_url }}" target="_blank" rel="noopener noreferrer" class="inline-flex items-center bg-primary text-white px-3 py-1 rounded text-xs font-medium hover:bg-primary-dark">
            <i class="fas fa-external-link-alt mr-1"></i> Website
          </a>
          {{ end }}
        </div>

        <!-- Achievements -->
        {{ if .achievements }}
        <div>
          <h4 class="text-sm font-semibold text-text-primary dark:text-text-primary mb-2">{{ i18n "achievements" }}</h4>
          <ul class="space-y-2">
            {{ range .achievements }}
            <li class="flex items-start text-sm text-gray-700 dark:text-text-secondary">
              <i class="fas fa-check-circle mr-2 mt-0.5 text-primary dark:text-primary-light flex-shrink-0"></i>
              <span>{{ . }}</span>
            </li>
            {{ end }}
          </ul>
        </div>
        {{ end }}
      </div>
      {{ end }}
    </div>
    <!-- View All Portfolio Link -->
    <div class="flex justify-end mt-8">
      <a href="/portfolio" class="text-primary dark:text-primary-light font-medium hover:underline inline-flex items-center">
        View All Portfolio
        <i class="fas fa-arrow-right ml-2 text-sm"></i>
      </a>
    </div>
    {{ end }}
  </div>
</section>